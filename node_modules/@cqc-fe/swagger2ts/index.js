#!/usr/bin/env node

const { cli } = require("./cli");
const { version, name } = require("./package.json");
const runSwagger = require('./runSwagger')


const program = cli({
  name: name,
  alias: "sta",
  version: version,
  description: "swagger to typescript API",
  options: [
    {
      flags: "-p, --path <string>",
      description: "path/url to swagger scheme",
    },
    {
      flags: "-s",
      description: "start gen",
      required: true,
    },
  ],
});


const main = async () => {
  try {
    const { command, options } = await program.execute({ args: process.argv });
    if (command !== null) return;
    await runSwagger(options);
  } catch (e) {
    console.error(e);
    process.exit(1);
    return;
  }
}

main()

